window.Settings=(function(e){var d="settings",a=".",c={layout:e("#settings"),btnOpen:e("#btn-settings"),btnClose:e("#btn-settings-back"),fields:{logout:e("#settings-logout"),email:e("#settings-logout").find(".profile-email"),clearCache:e("#settings-clear-cache"),syncInterval:e("#settings-sync-interval"),syncOnStart:e("#settings-sync-on-start"),vibrateOnLongPress:e("#settings-vibrate-on-long-press"),sidebarAnimation:e("#settings-sidebar-animation")}},f={bool:"bool",integer:"integer",string:"string"},b={container:"container",input:"input",select:"select",checkbox:"checkbox"},n={email:{el:c.fields.email,type:f.string,elType:b.container,"default":""},syncInterval:{el:c.fields.syncInterval,type:f.integer,elType:b.select,"default":0},syncOnStart:{el:c.fields.syncOnStart,type:f.bool,elType:b.checkbox,"default":true},vibrateOnLongPress:{el:c.fields.vibrateOnLongPress,type:f.bool,elType:b.checkbox,"default":true},sidebarAnimation:{el:c.fields.sidebarAnimation,type:f.bool,elType:b.checkbox,"default":true}};(function(){var r={layout:e("#donate"),btnOpen:e("#settings-donate"),btnClose:e("#btn-donate-back")};function q(){r.btnOpen.on("click",p);r.btnClose.on("click",o)}function p(s){s.preventDefault();FT.showInDevelopmentTooltip()}function o(s){s.preventDefault();r.layout.removeClass().addClass("fade-out")}q()}());(function(){var r={layout:e("#about"),btnOpen:e("#settings-about"),btnClose:e("#btn-about-back")};function q(){r.btnOpen.on("click",p);r.btnClose.on("click",o)}function p(s){s.preventDefault();r.layout.removeClass().addClass("fade-in")}function o(s){s.preventDefault();r.layout.removeClass().addClass("fade-out")}q()}());function l(){c.btnOpen.on("click",g);c.btnClose.on("click",i);c.fields.logout.on("click",j)}function h(){var p;for(var o in n){if(n.hasOwnProperty(o)){p=Settings.get(o);if(p===null||typeof p==="undefined"){Settings.set(o,n[o]["default"])}}}}function k(){var p;for(var o in n){if(n.hasOwnProperty(o)){p=Settings.get(o);switch(n[o].elType){case b.container:n[o].el.html(p);break;case b.checkbox:n[o].el.prop("checked",!!(p));break;case b.input:n[o].el.val(p);break;case b.select:n[o].el.find('option[value="'+p+'"]').prop("selected",true);break}}}}function m(){var p;for(var o in n){if(n.hasOwnProperty(o)){switch(n[o].elType){case b.container:p=n[o].el.html();break;case b.checkbox:p=n[o].el.prop("checked");break;case b.input:p=n[o].el.val();break;case b.select:p=n[o].el.find("option:selected").val();break}Settings.set(o,p)}}Logger.info("All options saved");EV.fire("options-saved")}function g(){k();c.layout.removeClass().addClass("fade-in")}function i(o){if(typeof o==="undefined"){o=true}o&&m();c.layout.removeClass().addClass("fade-out")}function j(o){o.preventDefault();if(!FT.isOnline()){utils.status.show("You are offline.\nIt is impossible to logout in offline mode",4000);return}var p={h1:"Log Out",p:"Revoke access given to a Fire Tasks?",cancel:"Cancel",ok:"Log Out",action:function(){Auth.revokeToken()}};FT.confirm(p)}return{init:function(){l();h();k()},get:function(o){var p=localStorage.getItem(d+a+o);if(p===null||typeof p==="undefined"){return null}switch(n[o].type){case f.integer:return parseInt(p);case f["float"]:return parseFloat(p);case f.bool:return(p==="true");case f.string:return p}},set:function(o,p){localStorage.setItem(d+a+o,p)},remove:function(o){localStorage.removeItem(d+a+o)},hideLayout:function(o){i(o)}}}(jQuery));