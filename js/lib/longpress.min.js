window.Longpress=(function(){var f=null,a=false,e=400,b=5,c,d;return{bindLongPressHandler:function(l,k,n,m){var j={};k=parseInt(k)||e;l.addEventListener("touchstart",o,false);l.addEventListener("mousedown",o,false);l.addEventListener("touchmove",h,false);function o(q){if(a||(q.type==="mousedown"&&App.isFFOS)){return}else{a=true}q.stopPropagation();c=new Date().getTime();if(q.type==="touchstart"){l.addEventListener("touchend",g,false);j={x:q.touches[0].screenX,y:q.touches[0].screenY}}else{if(q.type==="mousedown"){l.addEventListener("mouseup",g,false)}}f=setTimeout(function(){if(Settings.get("vibrateOnLongPress")){window.navigator.vibrate(80)}l.classList.add("longpress-ready")},k)}function g(q){if(!a){return}d=new Date().getTime()-c;if(d>=k){n&&n(q)}else{m&&m(q)}p(q)}function p(q){i();clearTimeout(f);a=null;if(q.type==="touchstart"||q.type==="touchmove"){l.removeEventListener("touchend",g)}else{if(q.type==="mousedown"){l.removeEventListener("mouseup",g)}}}function h(q){if(Math.abs(q.touches[0].screenX-j.x)>b||Math.abs(q.touches[0].screenY-j.y)>b){p(q)}}function i(){setTimeout(function(){var r=document.querySelectorAll(".longpress-ready");for(var q=0;q<r.length;q++){r[q].classList.remove("longpress-ready")}},200)}}}}());