window.Longpress=(function(){var g=null,a=false,d=false,f=400,b=5,c,e;return{bindLongPressHandler:function(m,l,o,n,r){var k={};l=parseInt(l)||f;r=(typeof r==="function")?r:function(){return false};m.addEventListener("touchstart",p,false);m.addEventListener("mousedown",p,false);m.addEventListener("touchmove",i,false);function p(s){if(a||(s.type==="mousedown"&&FT.isFFOS)){return}else{a=true}s.stopPropagation();c=new Date().getTime();if(s.type==="touchstart"){m.addEventListener("touchend",h,false);k={x:s.touches[0].screenX,y:s.touches[0].screenY}}else{if(s.type==="mousedown"){m.addEventListener("mouseup",h,false)}}if(r()){d=true;return}else{d=false}g=setTimeout(function(){if(Settings.get("vibrateOnLongPress")){window.navigator.vibrate(80)}m.classList.add("longpress-ready")},l)}function h(s){if(d){e=l-1}else{if(!a){return}else{e=new Date().getTime()-c}}if(e>=l){o&&o(s)}else{n&&n(s)}q(s)}function q(s){j();clearTimeout(g);a=null;if(s.type==="touchstart"||s.type==="touchmove"){m.removeEventListener("touchend",h)}else{if(s.type==="mousedown"){m.removeEventListener("mouseup",h)}}}function i(s){if(Math.abs(s.touches[0].screenX-k.x)>b||Math.abs(s.touches[0].screenY-k.y)>b){q(s)}}function j(){setTimeout(function(){var t=document.querySelectorAll(".longpress-ready");for(var s=0;s<t.length;s++){t[s].classList.remove("longpress-ready")}},200)}}}}());