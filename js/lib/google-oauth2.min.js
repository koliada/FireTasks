"use strict";(function(g){var s="google_oauth2_login_popup",b;if(g.name===s){if(g.opener&&g.opener.GO2){b=g.opener.GO2}if(g.parent&&g.parent.GO2){b=g.parent.GO2}if(b&&g.location.hash.indexOf("access_token")!==-1){b._handleMessage(g.location.hash.replace(/^.*access_token=([^&]+).*$/,"$1"),parseInt(g.location.hash.replace(/^.*expires_in=([^&]+).*$/,"$1")),g.location.hash.replace(/^.*state=go2_([^&]+).*$/,"$1"))}if(b&&g.location.search.indexOf("error=")!==-1){b._handleMessage(false)}g.close();return}var q,l,a="https://www.googleapis.com/auth/tasks",r=g.location.href.substr(0,g.location.href.length-g.location.hash.length).replace(/#$/,""),o,i,f,k=Math.random().toString(32).substr(2),m=500,h=550;b={init:function j(t){if(!t||!t.client_id){return false}q=t.client_id;if(t.scope){a=t.scope}if(a.constructor===Array){a=a.join(" ")}if(t.redirect_uri){r=t.redirect_uri}if(t.email){l=t.email}h=t.popupHeight||h;m=t.popupWidth||m;return true},login:function p(v,t){if(o){return}b._removeImmediateFrame();var u="https://accounts.google.com/o/oauth2/auth?response_type=token&redirect_uri="+encodeURIComponent(r)+"&scope="+encodeURIComponent(a)+"&state=go2_"+k+"&client_id="+encodeURIComponent(q)+"&login_hint="+l;if(!t&&v){u+="&approval_prompt=auto"}if(t){u+="&approval_prompt=auto";f=document.createElement("iframe");f.src=u;f.hidden=true;f.width=f.height=1;f.name=s;f.target="_top";f.mozbrowser=true;document.body.appendChild(f);return}var x=window.screenX+(window.outerWidth/2)-(m/2);var w=window.screenY+(window.outerHeight/2)-(h/2);g.open(u,s,"width="+m+",height="+h+",top="+w+",left="+x+",location=yes,toolbar=no,menubar=no")},logout:function d(){if(!o){return}b._removeImmediateFrame();clearTimeout(i);o=undefined;if(b.onlogout){b.onlogout()}},getAccessToken:function n(){return o},_handleMessage:function c(w,u,t){if(k!==t){return}b._removeImmediateFrame();if(!w){if(b.oncancel){b.oncancel()}}o=w;if(b.onlogin){b.onlogin(o)}clearTimeout(i);i=setTimeout(function v(){o=undefined;if(b.onlogout){b.onlogout()}},u*1000)},_removeImmediateFrame:function e(){if(!f){return}document.body.removeChild(f);f=null}};if(typeof define==="function"&&define.amd){define("google-oauth2-web-client",[],function(){return b})}else{g.GO2=b}})(this);